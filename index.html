<!DOCTYPE html>
<html lang="fr">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <!-- PWA manifest -->
  <link rel="manifest" href="/manifest.json">
  <!-- iOS meta -->
  <link rel="apple-touch-icon" href="/icons/icon-192.png">
  <link rel="icon" href="/icons/icon-192.png">
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
  <meta name="theme-color" content="#00d4ff">
  <title>Top Ten ğŸ¦„ğŸ’© - Pass & Play</title>
  <style>
    body { margin: 0; padding: 0; font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif; background: #000; color: #fff; display: flex; justify-content: center; align-items: center; height: 100vh; }
    #app { width: 100%; max-width: 480px; background: linear-gradient(135deg, #0d1b2a, #1b263b); border-radius: 16px; box-shadow: 0 4px 20px rgba(0,0,0,0.5); padding: 1.5rem; }
    h1, h2 { text-align: center; margin-bottom: 1rem; background: linear-gradient(90deg, #00d4ff, #ff00c1); -webkit-background-clip: text; -webkit-text-fill-color: transparent; }
    .screen { display: none; }
    .active { display: block; }
    label { display: block; margin-bottom: 0.5rem; }
    input[type=number], input[type=text] { width: 100%; padding: 0.6rem; margin-bottom: 1rem; border: none; border-radius: 8px; font-size: 1rem; }
    button { width: 100%; padding: 0.8rem; margin: 0.5rem 0; border: none; border-radius: 12px; font-size: 1rem; font-weight: bold; cursor: pointer; background: linear-gradient(90deg, #00d4ff, #ff00c1); color: #000; transition: transform 0.2s; }
    button:hover { transform: scale(1.05); }
    .card { margin: 1rem 0; padding: 1rem; background: #333; border-radius: 8px; font-size: 1.2rem; text-align: center; }
    .tokens { display: flex; justify-content: space-around; margin-top: 1rem; font-size: 1.2rem; }
    #feedback { text-align: center; font-size: 1.2rem; margin-top: 0.5rem; height: 1.4rem; }
  </style>
</head>
<body>
  <div id="app">
    <!-- Setup -->
    <div id="setup" class="screen active">
      <h1>Top Ten ğŸ¦„ğŸ’©</h1>
      <label>Nombre de joueurs (4â€“8)</label>
      <input type="number" id="playerCount" min="4" max="8" value="4">
      <button id="startBtn">Lancer la partie</button>
    </div>
    <!-- Names -->
    <div id="nameInput" class="screen">
      <h2>Entrez les noms des joueurs ğŸ“</h2>
      <div id="playerNames"></div>
      <button id="confirmNames">Valider les noms</button>
    </div>
    <!-- Game -->
    <div id="game" class="screen">
      <h2 id="roundTitle">Manche 1</h2>
      <div id="themeCard" class="card"></div>
      <button id="dealBtn">Distribuer numÃ©ros</button>
      <div id="showNumber" class="card" style="display:none;"><p>Au tour de <strong><span id="currentPlayer"></span></strong></p><button id="revealBtn">ğŸ” RÃ©vÃ©ler</button><p id="numberDisplay" style="display:none;">Ton numÃ©ro secret est <strong><span id="secretNum"></span></strong></p><button id="nextNumber" style="display:none;">â¡ï¸ Suivant</button></div>
      <div id="guessOrder" style="display:none;">
        <p>CAPâ€™TEN ğŸ§¢, devinez lâ€™ordre :</p>
        <div id="guessButtons"></div>
        <div id="feedback"></div>
      </div>
      <div class="tokens">
        <div>ğŸ¦„ <span id="licorneCount"></span></div>
        <div>ğŸ’© <span id="cacaCount"></span></div>
      </div>
    </div>
    <!-- Guessing -->
    <div id="guessing" class="screen">
      <h2>Ordre final</h2>
      <div id="answersList" class="card"></div>
      <button id="nextRound">Manche suivante</button>
    </div>
    <!-- End -->
    <div id="end" class="screen">
      <h2 id="endMessage"></h2>
      <button onclick="location.reload()">ğŸ”„ Rejouer</button>
    </div>
  </div>
  <script>
    document.addEventListener('DOMContentLoaded', () => {
      const THEMES = [
        "VOUS VOUS RÃ‰VEILLEREZ DEMAIN ENCORE BOURRÃ‰(E) AVEC UN OBJET EN MAIN. LEQUEL ? DE Lâ€™OBJET BANAL AU GRAND Nâ€™IMPORTE QUOI !",
        "NOOON... VOUS AVEZ OUBLIÃ‰ VOS CAPOTES POUR CE SOIR ! AVEC QUOI IMPROVISER ? DU MOINS EFFICACE AU PLUS EFFICACE.",
        "QUELLE BONNE RÃ‰SOLUTION SEXUELLE VENEZ-VOUS DE PRENDRE POUR 2021 ? DE LA MODESTE Ã€ Lâ€™AMBITIEUSE.",
        "DE QUOI AVEZ-VOUS PARLÃ‰ LORS DU REPAS DE NOÃ‹L ? DU SUJET CONSENSUEL AU SUJET QUI A DÃ‰RAPÃ‰ EN GUERRE FAMILIALE.",
        "VOUS FÃŠTEZ CETTE NOUVELLE ANNÃ‰E Ã€ LA FISTINIÃˆRE : QUELLE EST LE NOM DE LA CHAMBRE QUâ€™ON VOUS ATTRIBUE ? DE LA PETITE DOULEUR Ã€ LA GROSSE DOULEUR.",
        "MINUIT EST PASSÃ‰, Câ€™EST PARTI POUR DU GROS SON ! MIMEZ VOTRE DANSE, DE BIEN TIMIDE AU MÃ‰GA SHOW !",
        "VOUS AVEZ TROP BU ET VOUS ALLEZ VOMIR LÃ€, MAINTENANT. MIMEZ, DE Lâ€™HONNEUR EST SAUF Ã€ VOUS RUINER LA SOIRÃ‰E.",
        "LE GODE QUE Lâ€™ON VOUS A OFFERT Ã€ NOÃ‹L EST DÃ‰JÃ€ CASSÃ‰ ! PAR QUOI LE REMPLACER ? DE â€˜IL NE VAUT MIEUX PASâ€™ Ã€ â€˜Câ€™EST Lâ€™IDÃ‰ALâ€™.",
        "DEUX DE VOS AMI(E)S SONT PARTI(E)S SE COUCHER PLUS TÃ”T. MAIS LES MURS DU SALON SONT TRÃˆS FINS ET VOUS LES ENTENDEZ. IMITEZ LES GRINCEMENTS DU LIT, DE DISCRETS Ã€ TRÃˆS VIGOUREUX.",
        "â€œAVEC LE RECUL, FRANCHEMENT, 2020 Câ€™Ã‰TAIT ...â€ COMPLÃ‰TEZ, DU BILAN NÃ‰GATIF AU BILAN POSITIF.",
        "LEVEZ-VOUS ET MARCHEZ SUR UNE LIGNE DROITE IMAGINAIRE, DE TOTALEMENT SOBRE Ã€ BOURRÃ‰(E) COMME UN COING.",
        "PENDANT QUE VOUS FAITES LA FÃŠTE, UNE CAMÃ‰RA-ESPION FILME EN LIVE LE BABY-SITTER CHEZ VOUS. QUE DÃ‰COUVREZ-VOUS ? DE LA MAUVAISE Ã€ LA BONNE SURPRISE.",
        "VOUS VOUS RÃ‰VEILLEZ DANS UN LIT QUI Nâ€™EST PAS LE VÃ”TRE... MAIS AVEC QUI ? DE LA RENCONTRE COCASSE Ã€ LA HONTE INTERSIDÃ‰RALE.",
        "VOUS DEVEZ ENVOYER UN SEXTO MAIS VOTRE TÃ‰LÃ‰PHONE CORRIGE AUTOMATIQUEMENT VOS MOTS. QUEL MESSAGE PARTEZ-VOUS ENVOYER ? DE GÃŠNANT Ã€ â€˜APPEL LA POLICEâ€™.",
        "VOUS OUVREZ LE FRIGO EN RENTRANT DE SOIRÃ‰E. QUâ€™EST-CE QUE VOUS BOUFFEZ DANS VOTRE Ã‰TAT ? DU PETIT PLAISIR COUPABLE AU VRAI CAUCHEMAR DIGESTIF.",
        "CE BRUIT LÃ€, Câ€™Ã‰TAIT CLAIREMENT UN PET. MAIS QUI EN EST Lâ€™AUTEUR ? DU PLUS DISCRET AU COUPABLE FLAGRANT.",
        "VOTRE EX DÃ‰BARQUE Ã€ LA SOIRÃ‰E. QUELLE EST VOTRE RÃ‰ACTION ? DE LA POKER FACE POLIE Ã€ LA DESCENTE DE SHOTS DE VENGEANCE.",
        "VOUS JOUEZ Ã€ ACTION OU VÃ‰RITÃ‰ MAIS TOUT LE MONDE EST TRÃˆS, TROP MOTIVÃ‰. QUELLE EST Lâ€™ACTION QUE VOUS ACCEPTEZ ? DU COQUIN GÃŠNÃ‰ AU â€˜BON BAH Jâ€™AI PLUS DE DIGNITÃ‰â€™.",
        "VOUS TROUVEZ UN TRUC SOUS LE COUSSIN DU CANAPÃ‰. QUâ€™EST-CE QUE Câ€™EST ? DU BANAL OUBLI AU GROS MYSTÃˆRE POISSEUX.",
        "VOUS ENTENDEZ DES GÃ‰MISSEMENTS DANS LES TOILETTES. QUELLE EST VOTRE RÃ‰ACTION ? DE Lâ€™INDIFFÃ‰RENCE BLASÃ‰E Ã€ Lâ€™ENQUÃŠTE DIGNE Dâ€™UN PODCAST.",
        "LE DJ MET VOTRE GUILTY PLEASURE MUSICAL. Câ€™EST QUOI ? DU TUBE HONTEUX AU VRAI APPEL AU TWERK.",
        "VOUS DEVEZ INVENTER UN NOUVEAU COCKTAIL AVEC CE QUI RESTE. QUâ€™Y A-T-IL DEDANS ? DU CHELOU BUVABLE AU LIQUIDE DE VAISSELLE ALCOOLISÃ‰.",
        "VOUS RENTREZ CHEZ VOUS AVEC UNE PERSONNE RENCONTRÃ‰E EN SOIRÃ‰E. MAIS AU MOMENT Dâ€™ENLEVER LE PANTALON... SURPRISE ! DE LA GÃŠNE DIPLOMATIQUE AU â€˜BON BAH Jâ€™VAIS ME RECONVERTIR MOINEâ€™.",
        "VOUS AVEZ EU UN ACCIDENT PENDANT Lâ€™ACTE. LEQUEL ? DE â€˜Ã‡A RESTE ENTRE NOUSâ€™ Ã€ â€˜Jâ€™AI TACHÃ‰ Lâ€™Ã‚ME DU MATELASâ€™.",
        "VOUS RECEVEZ UN SEXT SANS CONTEXTE. QUâ€™EST-CE QUâ€™IL DIT ? DU MESSAGE POÃ‰TIQUE NSFW Ã€ Lâ€™AUDIO QUâ€™ON PEUT JAMAIS DÃ‰SENTENDRE.",
        "VOUS AVEZ TROP BU, VOUS VOULEZ TEXTOTER VOTRE EX. QUEL EST LE MESSAGE ? DE LA TENTATIVE PATHÃ‰TIQUE Ã€ Lâ€™HUMILIATION Ã‰TERNELLE.",
        "VOUS FAITES UNE GÃ‚TERIE MAIS UNE ODEUR VOUS AGRESSE. COMMENT VOUS RÃ‰AGISSEZ ? DE POLI ET STOÃQUE Ã€ â€˜FUITE STRATÃ‰GIQUE ET MENTHE FORTEâ€™.",
        "VOUS PASSEZ LA NUIT DANS UNE MAISON TRÃˆS MAL ISOLÃ‰E. QUâ€™EST-CE QUE VOUS ENTENDEZ ? DE â€˜TIENS, Ã‡A COUINEâ€™ Ã€ â€˜ON DIRAIT UN SACRIFICE DE CHÃˆVREâ€™.",
        "VOUS DEVEZ INVENTER UN JOUET SEXUEL FAIT MAISON AVEC CE QUI VOUS ENTOURE. QUEL EST VOTRE CHEF-Dâ€™Å’UVRE ? DE â€˜TECHNIQUEMENT Ã‡A MARCHEâ€™ Ã€ â€˜Jâ€™AI BESOIN Dâ€™UN CHIRURGIENâ€™.",
        "LE PRÃ‰SERVATIF A CRAQUÃ‰. COMMENT RÃ‰AGISSEZ-VOUS ? DE â€˜ZEN, ON GÃˆREâ€™ Ã€ â€˜GOOGLE : PRÃ‰NOMS QUI SE DONNENT EN PRISONâ€™.",
        "UN INVITÃ‰ DÃ‰CIDE DE SE METTRE NU SANS PRÃ‰VENIR. QUELLE EST VOTRE RÃ‰ACTION ? DE â€˜JE FAIS COMME SI DE RIEN Nâ€™Ã‰TAITâ€™ Ã€ â€˜JE VAIS BOIRE JUSQUâ€™Ã€ Lâ€™AMNÃ‰SIEâ€™.",
        "VOUS ÃŠTES EN TRAIN DE FAIRE Lâ€™AMOUR MAIS UN DES PARTICIPANTS PLEURE. POURQUOI ? DE â€˜Ã‡A ARRIVEâ€™ Ã€ â€˜IL/ELLE PENSAIT Ã€ SA MÃˆREâ€™.",
        "VOUS FAITES UNE DÃ‰MO DE VOTRE POSITION SEXUELLE PRÃ‰FÃ‰RÃ‰E. MONTREZ ! DE â€˜OK MARRANTâ€™ Ã€ â€˜Jâ€™AI BESOIN Dâ€™UN KINÃ‰ MAINTENANTâ€™.",
        "VOUS AVEZ Ã‰TÃ‰ FILMÃ‰(E) Ã€ VOTRE INSU PENDANT UN MOMENT TRÃˆS INTIME. QUEL EST LE TITRE DE LA VIDÃ‰O ? DU SOFT â€˜MOMENT DE TENDRESSEâ€™ Ã€ â€˜CE QUE Jâ€™AI FAIT AU CONCOMBRE EST ILLÃ‰GALâ€™.",
        "FAITES UN BRUIT AVEC VOTRE BOUCHE POUR DÃ‰CRIRE UN MOMENT TRÃˆS SEXUEL, DE LA CATASTROPHE Ã€ Lâ€™ORGASME ABSOLU.",
        "VOUS VOUS FAITES TATOUER CE SOIR. QUOI ? DU TATOUAGE PAS DINGUE AU PIRE CHOIX DE VOTRE VIE.",
        "VOUS PARTICIPEZ Ã€ UN CONCOURS DE FAUX ORGASMES. FAITES-NOUS UNE DÃ‰MO, DE LA PIRE PRESTATION Ã€ Lâ€™OSCAR DU CRI JOUISSIF.",
        "VOUS DEVEZ Ã‰TALER UNE NOUVELLE TARTINADE Ã€ Lâ€™APÃ‰RO. LAQUELLE ? DE LA DÃ‰LICIEUSE Ã€ LA PLUS DÃ‰GUEULASSE.",
        "VOUS ÃŠTES LE ROI DU DÃ‰GUSTE-PIED. COMMENT LES DÃ‰VOREZ-VOUS ? DU DÃ‰LICAT AU GLOUTON GORE.",
        "VOUS DEVEZ INVENTER UN MOT POUR DÃ‰SIGNER LE SEXE. DU PLUS MÃ‰TAPHORIQUE AU PLUS CASH.",
       "UN ESPRIT SEXUEL EST EN VOUS. QUEL GESTE FAITES-VOUS POUR SÃ‰DUIRE ? DU PLUS MIGNON AU PLUS WAW.",
        "VOUS Ã‰METTEZ UN SON POUR DÃ‰CRIRE UN MOMENT DE GÃŠNE ABSOLUE. DE LA GÃŠNE LÃ‰GÃˆRE Ã€ LA GÃŠNE IRRÃ‰CUPÃ‰RABLE.",
       "QUELQUE CHOSE SORT DE VOTRE BOUCHE LORS Dâ€™UNE FÃŠTE. DE LA BÃŠTISE Ã€ LA BOMBE SOCIALE."
      ];
      const NUMBERS = [1,2,3,4,5,6,7,8,9,10];
      let players = [], secretNums = [], round=1, maxRounds=5, licorne=0, caca=0, capten=0, cur=0, order=[];
      const screens=id=>document.getElementById(id);
      const getElById = id => document.getElementById(id);
      const show=id=>{['setup','nameInput','game','guessing','end'].forEach(i=>screens(i).classList.remove('active'));screens(id).classList.add('active');};
      getElById('startBtn').onclick=()=>{const n=+getElById('playerCount').value; if(n>=4&&n<=8){licorne=n; screens('setup').classList.remove('active'); let c=getElById('playerNames'); c.innerHTML=''; for(let i=1;i<=n;i++){let inp=document.createElement('input'); inp.type='text'; inp.placeholder='Joueur '+i; inp.required=true; c.appendChild(inp);} show('nameInput');}};
      getElById('confirmNames').onclick=()=>{players=Array.from(getElById('playerNames').querySelectorAll('input')).map(i=>i.value||i.placeholder); show('game'); initRound();};
      function initRound(){ if(round>maxRounds) return endGame(); order=[]; secretNums=[]; cur=0; show('game'); getElById('roundTitle').innerText='Manche '+round; getElById('themeCard').innerText=THEMES[Math.floor(Math.random()*THEMES.length)]; getElById('licorneCount').innerText=licorne; getElById('cacaCount').innerText=caca; getElById('dealBtn').style.display='block'; getElById('showNumber').style.display='none'; getElById('guessOrder').style.display='none'; getElById('guessButtons').innerHTML=''; getElById('answersList').innerHTML=''; getElById('feedback').innerText=''; }
      getElById('dealBtn').onclick=()=>{let pool=[...NUMBERS]; secretNums=players.map(_=>pool.splice(Math.floor(Math.random()*pool.length),1)[0]); getElById('dealBtn').style.display='none'; getElById('showNumber').style.display='block'; getElById('currentPlayer').innerText=players[cur];};
      getElById('revealBtn').onclick=()=>{getElById('secretNum').innerText=secretNums[cur]; getElById('numberDisplay').style.display='block'; getElById('revealBtn').style.display='none'; getElById('nextNumber').style.display='block';};
      getElById('nextNumber').onclick=()=>{cur++; getElById('numberDisplay').style.display='none'; getElById('revealBtn').style.display='block'; getElById('nextNumber').style.display='none'; if(cur<players.length){getElById('currentPlayer').innerText=players[cur];} else startGuess();};
      function startGuess(){ getElById('showNumber').style.display='none'; getElById('guessOrder').style.display='block'; const btns=getElById('guessButtons'); btns.innerHTML=''; getElById('feedback').innerText=''; players.forEach((p,i)=>{let b=document.createElement('button'); b.innerText=p; b.onclick=()=>makeGuess(i); btns.appendChild(b);}); }
      function makeGuess(i){ const n=secretNums[i]; const d=document.createElement('div'); d.innerText=`${players[i]} (${n})`; getElById('guessButtons').appendChild(d); order.push(n); let correct=true; if(order.length>1&&n<order[order.length-2]){ licorne--; caca++; getElById('licorneCount').innerText=licorne; getElById('cacaCount').innerText=caca; correct=false; if(licorne===0) return endGame(false);} getElById('feedback').innerText = correct? 'âœ… Correct !':'âŒ Erreur !'; event.target.disabled=true; if(order.length===players.length) finishRound(); }
      function finishRound(){
        show('guessing');
        // Afficher les rÃ©ponses finales
        getElById('answersList').innerHTML = players.map((p,i) => `${p}: ${secretNums[i]}`).join('<br>');
        // VÃ©rifier si l'ordre est strictement croissant
        const isCorrect = order.every((v,i) => i === 0 || v >= order[i-1]);
        // Afficher un feedback global
        const feedbackEl = document.createElement('div');
        feedbackEl.style.marginTop = '1rem';
        feedbackEl.style.fontSize = '1.2rem';
        feedbackEl.style.textAlign = 'center';
        feedbackEl.textContent = isCorrect ? 'ğŸ‰ Lâ€™ordre est correct !' : 'âš ï¸ Lâ€™ordre comporte des erreurs.';
        getElById('answersList').appendChild(feedbackEl);
      }
      getElById('nextRound').onclick=()=>{ round++; capten=(capten+1)%players.length; initRound(); };
      function endGame(win){ show('end'); getElById('endMessage').innerText=win?'Victoire ! ğŸ‰':'DÃ©faite... ğŸ’€'; }
    });
  </script>
</body>
</html>
